(()=>{var e={};function o(e){return+e+""===e}function n(o){chrome.tabs.executeScript(o,{file:"/build/proxy.js"},(function(n){n?console.log("injected proxy to tab "+o):e[o].devtools.postMessage("proxy-fail")}))}function t(o,n,t){function s(e){if("log"===e.event)return console.log("tab "+o,e.payload);console.log("devtools -> backend",e),t.postMessage(e)}function a(e){if("log"===e.event)return console.log("tab "+o,e.payload);console.log("backend -> devtools",e),n.postMessage(e)}function c(){console.log("tab "+o+" disconnected."),n.onMessage.removeListener(s),t.onMessage.removeListener(a),n.disconnect(),t.disconnect(),e[o]=null}n.onMessage.addListener(s),t.onMessage.addListener(a),n.onDisconnect.addListener(c),t.onDisconnect.addListener(c),console.log("tab "+o+" connected.")}chrome.runtime.onConnect.addListener((s=>{var a,c;o(s.name)?(a=s.name,c="devtools",n(+s.name)):(a=s.sender.tab.id,c="backend"),e[a]||(e[a]={devtools:null,backend:null}),e[a][c]=s,e[a].devtools&&e[a].backend&&t(a,e[a].devtools,e[a].backend)})),chrome.runtime.onMessage.addListener(((e,o)=>{if(o.tab&&e.vueDetected){var n=e.nuxtDetected?".nuxt":"";chrome.browserAction.setIcon({tabId:o.tab.id,path:{16:`icons/16${n}.png`,48:`icons/48${n}.png`,128:`icons/128${n}.png`}}),chrome.browserAction.setPopup({tabId:o.tab.id,popup:e.devtoolsEnabled?`popups/enabled${n}.html`:`popups/disabled${n}.html`})}"vue-take-screenshot"===e.action&&"devtools_child"===o.envType&&browser.tabs.captureVisibleTab({format:"png"}).then((o=>{browser.runtime.sendMessage({action:"vue-screenshot-result",id:e.id,dataUrl:o})}))}))})();